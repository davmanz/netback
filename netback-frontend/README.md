# Netback — Frontend (React + MUI)\n\nInterfaz web para **gestión de dispositivos de red y respaldos**. Consume la API vía **Proxy (FastAPI)** y se sirve con **Nginx**.\n\n---\n\n## 🧭 ¿Qué hace?\n- UI para **inventario** (fabricantes, tipos, países, sitios, áreas, dispositivos).\n- **Backups**: gatillar manual, ver historial, comparar cambios (diff estructurado).\n- **Programación** de hora de respaldo automático.\n- **Diagnóstico**: ejecución de comandos / ping (vía API).\n- **Clasificación** de hosts (CSV/Zabbix) y guardado masivo.\n\n> Todo el tráfico de API se hace contra la ruta **relativa** `/api/*`, que Nginx reenvía al **Proxy**.\n\n---\n\n## 🏗️ Stack & librerías\n- **React 18**, **React Router 7**\n- **Material UI 6** (`@mui/material`, `@mui/icons-material`)\n- **Zustand** (estado)\n- **Axios** (HTTP)\n- **Create React App** (`react-scripts`)\n\n> Ver `package.json` para el detalle de versiones.\n\n---\n\n## 🌐 Servido por Nginx\n- Archivos build en `/usr/share/nginx/html`.\n- **SPA routing**: `try_files $uri /index.html;` y `error_page 404 /index.html;` → refrescos en rutas funcionan.\n- **Reverse proxy**: `location /api/ { proxy_pass http://netback-proxy:8080/; ... }` (ver `nginx.conf`).\n- **Seguridad**: cabeceras (CSP, X-Frame-Options, X-Content-Type-Options, etc.).\n- **Rate limiting**: `limit_req_zone` (por defecto 1 r/s con `burst=10`). Ajustable.\n\n---\n\n## ⚙️ Configuración\nEn la app se recomienda usar **ruta relativa** `/api` (no se requiere `.env` de frontend) porque Nginx proxya al Proxy.\n\nSi necesitas apuntar a otra API **sin** Nginx, puedes adoptar una variable (ej.):\n```\nREACT_APP_API_BASE=https://mi-api\n```\ny configurar el `baseURL` de Axios en el código, pero **no es necesario** en el despliegue por defecto.\n\n---\n\n## ▶️ Cómo ejecutar\n### Con Docker (recomendado)\nSe orquesta desde la raíz con `docker-compose.yml` (servicio `frontend`).\n\n```bash\ndocker compose up -d --build frontend\n```\n- Expone **http://localhost:80**.\n- Depende de `proxy` saludable.\n\n### Local (desarrollo)\n> Puedes usar **pnpm** (como en el Dockerfile) o **npm**.\n\nCon **pnpm**:\n```bash\npnpm install\npnpm start\n# build\npnpm build\n```\nCon **npm**:\n```bash\nnpm install\nnpm start\n# build\nnpm run build\n```\n\n> En desarrollo sin Nginx, si llamas a `/api`, necesitarás un proxy local o configurar `REACT_APP_API_BASE`.\n\n---\n\n## 🧪 Healthcheck\n- El contenedor usa healthcheck contra `http://localhost:80/`.\n\n---\n\n## 📂 Estructura (resumen)\n```\nnetback-frontend/\n├─ src/                 # Componentes, páginas, rutas, stores (Zustand)\n├─ public/              # index.html, assets\n├─ nginx.conf           # Reverse proxy / headers / SPA\n├─ Dockerfile           # Build multi-stage (Node → Nginx)\n├─ package.json         # scripts y dependencias\n├─ pnpm-lock.yaml       # lock de pnpm\n└─ package-lock.json    # lock de npm (si trabajas con npm)\n```\n\n---\n\n## 🔐 Seguridad & rendimiento\n- **CSP** en `nginx.conf`: actualmente permite `'unsafe-inline'` para compatibilidad. Endurecer si es posible usando estilos/scripts hash o nonce.\n- **Rate limiting**: por defecto `1r/s` con `burst=10`. Para producción típica, considera `10r/s`.\n- **Caché estáticos**: 1 año en `location ~* \\.(ico|css|js|...)$`.\n- Bloqueo de archivos ocultos: `location ~ /\\.` → **deny all**.\n\n---\n\n## 🧰 Troubleshooting\n- **Pantalla en blanco tras desplegar**: revisar CSP en `nginx.conf` y consola del navegador (bloqueos CSP).\n- **API 404/401**: verifica que el Proxy esté arriba y que el frontend llame a `/api/*` (o configura `REACT_APP_API_BASE`).\n- **CORS**: el Proxy maneja CORS; el frontend no necesita configurarlo.\n- **Caché tras nueva versión**: fuerza reload duro; considera versionado de assets/Service Worker si usas PWA.\n\n---\n\n## Licencia\nProyecto interno Netback. Uso restringido.\n