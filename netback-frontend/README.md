# Netback â€” Frontend (React + MUI)\n\nInterfaz web para **gestiÃ³n de dispositivos de red y respaldos**. Consume la API vÃ­a **Proxy (FastAPI)** y se sirve con **Nginx**.\n\n---\n\n## ğŸ§­ Â¿QuÃ© hace?\n- UI para **inventario** (fabricantes, tipos, paÃ­ses, sitios, Ã¡reas, dispositivos).\n- **Backups**: gatillar manual, ver historial, comparar cambios (diff estructurado).\n- **ProgramaciÃ³n** de hora de respaldo automÃ¡tico.\n- **DiagnÃ³stico**: ejecuciÃ³n de comandos / ping (vÃ­a API).\n- **ClasificaciÃ³n** de hosts (CSV/Zabbix) y guardado masivo.\n\n> Todo el trÃ¡fico de API se hace contra la ruta **relativa** `/api/*`, que Nginx reenvÃ­a al **Proxy**.\n\n---\n\n## ğŸ—ï¸ Stack & librerÃ­as\n- **React 18**, **React Router 7**\n- **Material UI 6** (`@mui/material`, `@mui/icons-material`)\n- **Zustand** (estado)\n- **Axios** (HTTP)\n- **Create React App** (`react-scripts`)\n\n> Ver `package.json` para el detalle de versiones.\n\n---\n\n## ğŸŒ Servido por Nginx\n- Archivos build en `/usr/share/nginx/html`.\n- **SPA routing**: `try_files $uri /index.html;` y `error_page 404 /index.html;` â†’ refrescos en rutas funcionan.\n- **Reverse proxy**: `location /api/ { proxy_pass http://netback-proxy:8080/; ... }` (ver `nginx.conf`).\n- **Seguridad**: cabeceras (CSP, X-Frame-Options, X-Content-Type-Options, etc.).\n- **Rate limiting**: `limit_req_zone` (por defecto 1 r/s con `burst=10`). Ajustable.\n\n---\n\n## âš™ï¸ ConfiguraciÃ³n\nEn la app se recomienda usar **ruta relativa** `/api` (no se requiere `.env` de frontend) porque Nginx proxya al Proxy.\n\nSi necesitas apuntar a otra API **sin** Nginx, puedes adoptar una variable (ej.):\n```\nREACT_APP_API_BASE=https://mi-api\n```\ny configurar el `baseURL` de Axios en el cÃ³digo, pero **no es necesario** en el despliegue por defecto.\n\n---\n\n## â–¶ï¸ CÃ³mo ejecutar\n### Con Docker (recomendado)\nSe orquesta desde la raÃ­z con `docker-compose.yml` (servicio `frontend`).\n\n```bash\ndocker compose up -d --build frontend\n```\n- Expone **http://localhost:80**.\n- Depende de `proxy` saludable.\n\n### Local (desarrollo)\n> Puedes usar **pnpm** (como en el Dockerfile) o **npm**.\n\nCon **pnpm**:\n```bash\npnpm install\npnpm start\n# build\npnpm build\n```\nCon **npm**:\n```bash\nnpm install\nnpm start\n# build\nnpm run build\n```\n\n> En desarrollo sin Nginx, si llamas a `/api`, necesitarÃ¡s un proxy local o configurar `REACT_APP_API_BASE`.\n\n---\n\n## ğŸ§ª Healthcheck\n- El contenedor usa healthcheck contra `http://localhost:80/`.\n\n---\n\n## ğŸ“‚ Estructura (resumen)\n```\nnetback-frontend/\nâ”œâ”€ src/                 # Componentes, pÃ¡ginas, rutas, stores (Zustand)\nâ”œâ”€ public/              # index.html, assets\nâ”œâ”€ nginx.conf           # Reverse proxy / headers / SPA\nâ”œâ”€ Dockerfile           # Build multi-stage (Node â†’ Nginx)\nâ”œâ”€ package.json         # scripts y dependencias\nâ”œâ”€ pnpm-lock.yaml       # lock de pnpm\nâ””â”€ package-lock.json    # lock de npm (si trabajas con npm)\n```\n\n---\n\n## ğŸ” Seguridad & rendimiento\n- **CSP** en `nginx.conf`: actualmente permite `'unsafe-inline'` para compatibilidad. Endurecer si es posible usando estilos/scripts hash o nonce.\n- **Rate limiting**: por defecto `1r/s` con `burst=10`. Para producciÃ³n tÃ­pica, considera `10r/s`.\n- **CachÃ© estÃ¡ticos**: 1 aÃ±o en `location ~* \\.(ico|css|js|...)$`.\n- Bloqueo de archivos ocultos: `location ~ /\\.` â†’ **deny all**.\n\n---\n\n## ğŸ§° Troubleshooting\n- **Pantalla en blanco tras desplegar**: revisar CSP en `nginx.conf` y consola del navegador (bloqueos CSP).\n- **API 404/401**: verifica que el Proxy estÃ© arriba y que el frontend llame a `/api/*` (o configura `REACT_APP_API_BASE`).\n- **CORS**: el Proxy maneja CORS; el frontend no necesita configurarlo.\n- **CachÃ© tras nueva versiÃ³n**: fuerza reload duro; considera versionado de assets/Service Worker si usas PWA.\n\n---\n\n## Licencia\nProyecto interno Netback. Uso restringido.\n